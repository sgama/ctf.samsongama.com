!function(){function b(a){var c,b;if(null===a||"object"!=typeof a)return a;c=a.constructor();for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c}var a=function(c){var b=new a.Index;return b.pipeline.add(a.trimmer,a.stopWordFilter,a.stemmer),c&&c.call(b,b),b};a.version="0.9.5",lunr=a,a.utils={},a.utils.warn=function(a){return function(b){a.console&&console.warn&&console.warn(b)}}(this),a.utils.toString=function(a){return void 0===a||null===a?"":a.toString()},a.EventEmitter=function(){this.events={}},a.EventEmitter.prototype.addListener=function(){var a=Array.prototype.slice.call(arguments),b=a.pop(),c=a;if("function"!=typeof b)throw new TypeError("last argument must be a function");c.forEach(function(a){this.hasHandler(a)||(this.events[a]=[]),this.events[a].push(b)},this)},a.EventEmitter.prototype.removeListener=function(a,c){if(this.hasHandler(a)){var b=this.events[a].indexOf(c);-1!==b&&(this.events[a].splice(b,1),0==this.events[a].length&&delete this.events[a])}},a.EventEmitter.prototype.emit=function(a){if(this.hasHandler(a)){var b=Array.prototype.slice.call(arguments,1);this.events[a].forEach(function(a){a.apply(void 0,b)},this)}},a.EventEmitter.prototype.hasHandler=function(a){return a in this.events},a.tokenizer=function(b){var c,d;return!arguments.length||null===b||void 0===b?[]:Array.isArray(b)?(c=b.filter(function(a){return!(null===a||void 0===a)}),c=c.map(function(b){return a.utils.toString(b).toLowerCase()}),d=[],c.forEach(function(b){var c=b.split(a.tokenizer.seperator);d=d.concat(c)},this),d):b.toString().trim().toLowerCase().split(a.tokenizer.seperator)},a.tokenizer.defaultSeperator=/[\s\-]+/,a.tokenizer.seperator=a.tokenizer.defaultSeperator,a.tokenizer.setSeperator=function(b){null!==b&&void 0!==b&&"object"==typeof b&&(a.tokenizer.seperator=b)},a.tokenizer.resetSeperator=function(){a.tokenizer.seperator=a.tokenizer.defaultSeperator},a.tokenizer.getSeperator=function(){return a.tokenizer.seperator},a.Pipeline=function(){this._queue=[]},a.Pipeline.registeredFunctions={},a.Pipeline.registerFunction=function(c,b){b in a.Pipeline.registeredFunctions&&a.utils.warn("Overwriting existing registered function: "+b),c.label=b,a.Pipeline.registeredFunctions[b]=c},a.Pipeline.getRegisteredFunction=function(b){return b in a.Pipeline.registeredFunctions!=!0?null:a.Pipeline.registeredFunctions[b]},a.Pipeline.warnIfFunctionNotRegistered=function(b){var c=b.label&&b.label in this.registeredFunctions;c||a.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",b)},a.Pipeline.load=function(c){var b=new a.Pipeline;return c.forEach(function(c){var d=a.Pipeline.getRegisteredFunction(c);if(!d)throw new Error("Cannot load un-registered function: "+c);b.add(d)}),b},a.Pipeline.prototype.add=function(){var b=Array.prototype.slice.call(arguments);b.forEach(function(b){a.Pipeline.warnIfFunctionNotRegistered(b),this._queue.push(b)},this)},a.Pipeline.prototype.after=function(d,b){a.Pipeline.warnIfFunctionNotRegistered(b);var c=this._queue.indexOf(d);if(-1===c)throw new Error("Cannot find existingFn");this._queue.splice(c+1,0,b)},a.Pipeline.prototype.before=function(d,b){a.Pipeline.warnIfFunctionNotRegistered(b);var c=this._queue.indexOf(d);if(-1===c)throw new Error("Cannot find existingFn");this._queue.splice(c,0,b)},a.Pipeline.prototype.remove=function(b){var a=this._queue.indexOf(b);-1!==a&&this._queue.splice(a,1)},a.Pipeline.prototype.run=function(c){for(var e=[],f=c.length,g=this._queue.length,b=0,a,d;f>b;b++){for(a=c[b],d=0;g>d&&(a=this._queue[d](a,b,c),void 0!==a&&null!==a);d++);void 0!==a&&null!==a&&e.push(a)}return e},a.Pipeline.prototype.reset=function(){this._queue=[]},a.Pipeline.prototype.get=function(){return this._queue},a.Pipeline.prototype.toJSON=function(){return this._queue.map(function(b){return a.Pipeline.warnIfFunctionNotRegistered(b),b.label})},a.Index=function(){this._fields=[],this._ref="id",this.pipeline=new a.Pipeline,this.documentStore=new a.DocumentStore,this.index={},this.eventEmitter=new a.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},a.Index.prototype.on=function(){var a=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,a)},a.Index.prototype.off=function(a,b){return this.eventEmitter.removeListener(a,b)},a.Index.load=function(b){var c,d;b.version!==a.version&&a.utils.warn("version mismatch: current "+a.version+" importing "+b.version),c=new this,c._fields=b.fields,c._ref=b.ref,c.documentStore=a.DocumentStore.load(b.documentStore),c.pipeline=a.Pipeline.load(b.pipeline),c.index={};for(d in b.index)c.index[d]=a.InvertedIndex.load(b.index[d]);return c},a.Index.prototype.addField=function(b){return this._fields.push(b),this.index[b]=new a.InvertedIndex,this},a.Index.prototype.setRef=function(a){return this._ref=a,this},a.Index.prototype.saveDocument=function(b){return this.documentStore=new a.DocumentStore(b),this},a.Index.prototype.addDoc=function(b,c){if(b){var c=void 0===c||c,d=b[this._ref];this.documentStore.addDoc(d,b),this._fields.forEach(function(e){var g=this.pipeline.run(a.tokenizer(b[e])),c,h,f;this.documentStore.addFieldLength(d,e,g.length),c={},g.forEach(function(a){a in c?c[a]+=1:c[a]=1},this);for(h in c)f=c[h],f=Math.sqrt(f),this.index[e].addToken(h,{ref:d,tf:f})},this),c&&this.eventEmitter.emit("add",b,this)}},a.Index.prototype.removeDocByRef=function(a){if(a&&this.documentStore.isDocStored()!==!1&&this.documentStore.hasDoc(a)){var b=this.documentStore.getDoc(a);this.removeDoc(b,!1)}},a.Index.prototype.removeDoc=function(b,c){if(b){var c=void 0===c||c,d=b[this._ref];this.documentStore.hasDoc(d)&&(this.documentStore.removeDoc(d),this._fields.forEach(function(c){var e=this.pipeline.run(a.tokenizer(b[c]));e.forEach(function(a){this.index[c].removeToken(a,d)},this)},this),c&&this.eventEmitter.emit("remove",b,this))}},a.Index.prototype.updateDoc=function(b,a){var a=void 0===a||a;this.removeDocByRef(b[this._ref],!1),this.addDoc(b,!1),a&&this.eventEmitter.emit("update",b,this)},a.Index.prototype.idf=function(b,c){var a="@"+c+"/"+b,e,d;return Object.prototype.hasOwnProperty.call(this._idfCache,a)?this._idfCache[a]:(e=this.index[c].getDocFreq(b),d=1+Math.log(this.documentStore.length/(e+1)),this._idfCache[a]=d,d)},a.Index.prototype.getFields=function(){return this._fields.slice()},a.Index.prototype.search=function(c,q){var o,h,f,l,g,m,e,i,n,d,p,b,j,k;if(!c)return[];c="string"==typeof c?{any:c}:JSON.parse(JSON.stringify(c)),o=null,null!=q&&(o=JSON.stringify(q));for(h=new a.Configuration(o,this.getFields()).get(),f={},l=Object.keys(c),g=0;g<l.length;g++)m=l[g],f[m]=this.pipeline.run(a.tokenizer(c[m]));e={};for(i in h)if(n=f[i]||f.any,n){d=this.fieldSearch(n,i,h),p=h[i].boost;for(b in d)d[b]=d[b]*p;for(b in d)b in e?e[b]+=d[b]:e[b]=d[b]}k=[];for(b in e)j={ref:b,score:e[b]},this.documentStore.hasDoc(b)&&(j.doc=this.documentStore.getDoc(b)),k.push(j);return k.sort(function(a,b){return b.score-a.score}),k},a.Index.prototype.fieldSearch=function(e,a,c){var d=c[a].bool,g=c[a].expand,h=c[a].boost,b=null,f={};return 0!==h?(e.forEach(function(c){var h=[c],e;1==g&&(h=this.index[a].expandToken(c)),e={},h.forEach(function(h){var i=this.index[a].getDocs(h),p=this.idf(h,a),k,g,o,l,m,j,n;if(b&&"AND"==d){k={};for(g in b)g in i&&(k[g]=i[g]);i=k}h==c&&this.fieldSearchStats(f,h,i);for(g in i)o=this.index[a].getTermFrequency(h,g),l=this.documentStore.getFieldLength(g,a),m=1,0!=l&&(m=1/Math.sqrt(l)),j=1,h!=c&&(j=.15*(1-(h.length-c.length)/h.length)),n=o*p*m*j,g in e?e[g]+=n:e[g]=n},this),b=this.mergeScores(b,e,d)},this),b=this.coordNorm(b,f,e.length)):void 0},a.Index.prototype.mergeScores=function(b,c,e){var d,a;if(!b)return c;if("AND"==e){d={};for(a in c)a in b&&(d[a]=b[a]+c[a]);return d}for(a in c)a in b?b[a]+=c[a]:b[a]=c[a];return b},a.Index.prototype.fieldSearchStats=function(a,c,d){for(var b in d)b in a?a[b].push(c):a[b]=[c]},a.Index.prototype.coordNorm=function(b,c,e){var a,d;for(a in b)a in c&&(d=c[a].length,b[a]=b[a]*d/e);return b},a.Index.prototype.toJSON=function(){var b={};return this._fields.forEach(function(a){b[a]=this.index[a].toJSON()},this),{version:a.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),index:b,pipeline:this.pipeline.toJSON()}},a.Index.prototype.use=function(b){var a=Array.prototype.slice.call(arguments,1);a.unshift(this),b.apply(this,a)},a.DocumentStore=function(a){this._save=!!(null===a||void 0===a)||a,this.docs={},this.docInfo={},this.length=0},a.DocumentStore.load=function(b){var a=new this;return a.length=b.length,a.docs=b.docs,a.docInfo=b.docInfo,a._save=b.save,a},a.DocumentStore.prototype.isDocStored=function(){return this._save},a.DocumentStore.prototype.addDoc=function(a,c){this.hasDoc(a)||this.length++,this.docs[a]=this._save===!0?b(c):null},a.DocumentStore.prototype.getDoc=function(a){return this.hasDoc(a)===!1?null:this.docs[a]},a.DocumentStore.prototype.hasDoc=function(a){return a in this.docs},a.DocumentStore.prototype.removeDoc=function(a){this.hasDoc(a)&&(delete this.docs[a],delete this.docInfo[a],this.length--)},a.DocumentStore.prototype.addFieldLength=function(a,b,c){null!==a&&void 0!==a&&0!=this.hasDoc(a)&&(this.docInfo[a]||(this.docInfo[a]={}),this.docInfo[a][b]=c)},a.DocumentStore.prototype.updateFieldLength=function(a,b,c){null!==a&&void 0!==a&&0!=this.hasDoc(a)&&this.addFieldLength(a,b,c)},a.DocumentStore.prototype.getFieldLength=function(a,b){return null===a||void 0===a?0:a in this.docs&&b in this.docInfo[a]?this.docInfo[a][b]:0},a.DocumentStore.prototype.toJSON=function(){return{docs:this.docs,docInfo:this.docInfo,length:this.length,save:this._save}},a.stemmer=function(){var g={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},s={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},l="[^aeiou]",d="[aeiouy]",a=l+"[^aeiouy]*",b=d+"[aeiou]*",k="^("+a+")?"+b+a,h="^("+a+")?"+b+a+"("+b+")?$",i="^("+a+")?"+b+a+b+a,j="^("+a+")?"+d,e=new RegExp(k),c=new RegExp(i),m=new RegExp(h),n=new RegExp(j),o=/^(.+?)(ss|i)es$/,p=/^(.+?)([^s])s$/,q=/^(.+?)eed$/,r=/^(.+?)(ed|ing)$/,f=/.$/,t=/(at|bl|iz)$/,u=new RegExp("([^aeiouylsz])\\1$"),v=new RegExp("^"+a+d+"[^aeiouwxy]$"),w=/^(.+?[^aeiou])y$/,x=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,y=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,z=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,A=/^(.+?)(s|t)(ion)$/,B=/^(.+?)e$/,C=/ll$/,D=new RegExp("^"+a+d+"[^aeiouwxy]$"),E=function(a){var d,l,j,b,h,k,E,i;return a.length<3?a:((j=a.substr(0,1),"y"==j&&(a=j.toUpperCase()+a.substr(1)),b=o,h=p,b.test(a)?a=a.replace(b,"$1$2"):h.test(a)&&(a=a.replace(h,"$1$2")),b=q,h=r,b.test(a))?(i=b.exec(a),b=e,b.test(i[1])&&(b=f,a=a.replace(b,""))):h.test(a)&&(i=h.exec(a),d=i[1],h=n,h.test(d)&&(a=d,h=t,k=u,E=v,h.test(a)?a+="e":k.test(a)?(b=f,a=a.replace(b,"")):E.test(a)&&(a+="e"))),(b=w,b.test(a))&&(i=b.exec(a),d=i[1],a=d+"i"),(b=x,b.test(a))&&(i=b.exec(a),d=i[1],l=i[2],b=e,b.test(d)&&(a=d+g[l])),(b=y,b.test(a))&&(i=b.exec(a),d=i[1],l=i[2],b=e,b.test(d)&&(a=d+s[l])),(b=z,h=A,b.test(a))?(i=b.exec(a),d=i[1],b=c,b.test(d)&&(a=d)):h.test(a)&&(i=h.exec(a),d=i[1]+i[2],h=c,h.test(d)&&(a=d)),(b=B,b.test(a))&&(i=b.exec(a),d=i[1],b=c,h=m,k=D,(b.test(d)||h.test(d)&&!k.test(d))&&(a=d)),b=C,h=c,b.test(a)&&h.test(a)&&(b=f,a=a.replace(b,"")),"y"==j&&(a=j.toLowerCase()+a.substr(1)),a)};return E}(),a.Pipeline.registerFunction(a.stemmer,"stemmer"),a.stopWordFilter=function(b){return b&&a.stopWordFilter.stopWords[b]!==!0?b:void 0},a.clearStopWords=function(){a.stopWordFilter.stopWords={}},a.addStopWords=function(b){null!=b&&Array.isArray(b)!==!1&&b.forEach(function(b){a.stopWordFilter.stopWords[b]=!0},this)},a.resetStopWords=function(){a.stopWordFilter.stopWords=a.defaultStopWords},a.defaultStopWords={"":!0,a:!0,able:!0,about:!0,across:!0,after:!0,all:!0,almost:!0,also:!0,am:!0,among:!0,an:!0,and:!0,any:!0,are:!0,as:!0,at:!0,be:!0,because:!0,been:!0,but:!0,by:!0,can:!0,cannot:!0,could:!0,dear:!0,did:!0,do:!0,does:!0,either:!0,else:!0,ever:!0,every:!0,for:!0,from:!0,get:!0,got:!0,had:!0,has:!0,have:!0,he:!0,her:!0,hers:!0,him:!0,his:!0,how:!0,however:!0,i:!0,if:!0,in:!0,into:!0,is:!0,it:!0,its:!0,just:!0,least:!0,let:!0,like:!0,likely:!0,may:!0,me:!0,might:!0,most:!0,must:!0,my:!0,neither:!0,no:!0,nor:!0,not:!0,of:!0,off:!0,often:!0,on:!0,only:!0,or:!0,other:!0,our:!0,own:!0,rather:!0,said:!0,say:!0,says:!0,she:!0,should:!0,since:!0,so:!0,some:!0,than:!0,that:!0,the:!0,their:!0,them:!0,then:!0,there:!0,these:!0,they:!0,this:!0,tis:!0,to:!0,too:!0,twas:!0,us:!0,wants:!0,was:!0,we:!0,were:!0,what:!0,when:!0,where:!0,which:!0,while:!0,who:!0,whom:!0,why:!0,will:!0,with:!0,would:!0,yet:!0,you:!0,your:!0},a.stopWordFilter.stopWords=a.defaultStopWords,a.Pipeline.registerFunction(a.stopWordFilter,"stopWordFilter"),a.trimmer=function(a){if(null===a||void 0===a)throw new Error("token should not be undefined");return a.replace(/^\W+/,"").replace(/\W+$/,"")},a.Pipeline.registerFunction(a.trimmer,"trimmer"),a.InvertedIndex=function(){this.root={docs:{},df:0}},a.InvertedIndex.load=function(b){var a=new this;return a.root=b.root,a},a.InvertedIndex.prototype.addToken=function(f,b,a){for(var a=a||this.root,c=0,d,e;c<=f.length-1;)d=f[c],d in a||(a[d]={docs:{},df:0}),c+=1,a=a[d];e=b.ref,a.docs[e]?a.docs[e]={tf:b.tf}:(a.docs[e]={tf:b.tf},a.df+=1)},a.InvertedIndex.prototype.hasToken=function(a){if(!a)return!1;for(var c=this.root,b=0;b<a.length;b++){if(!c[a[b]])return!1;c=c[a[b]]}return!0},a.InvertedIndex.prototype.getNode=function(a){if(!a)return null;for(var b=this.root,c=0;c<a.length;c++){if(!b[a[c]])return null;b=b[a[c]]}return b},a.InvertedIndex.prototype.getDocs=function(b){var a=this.getNode(b);return null==a?{}:a.docs},a.InvertedIndex.prototype.getTermFrequency=function(c,b){var a=this.getNode(c);return null==a?0:b in a.docs?a.docs[b].tf:0},a.InvertedIndex.prototype.getDocFreq=function(b){var a=this.getNode(b);return null==a?0:a.df},a.InvertedIndex.prototype.removeToken=function(b,c){if(b){var a=this.getNode(b);null!=a&&c in a.docs&&(delete a.docs[c],a.df-=1)}},a.InvertedIndex.prototype.expandToken=function(c,a,b){var d;if(null==c||""==c)return[];if(a=a||[],void 0==b&&(b=this.getNode(c),null==b))return a;b.df>0&&a.push(c);for(d in b)"docs"!==d&&"df"!==d&&this.expandToken(c+d,a,b[d]);return a},a.InvertedIndex.prototype.toJSON=function(){return{root:this.root}},a.Configuration=function(c,b){var c=c||"",d;if(void 0==b||null==b)throw new Error("fields should not be null");this.config={};try{d=JSON.parse(c),this.buildUserConfig(d,b)}catch(c){a.utils.warn("user configuration parse failed, will use default configuration"),this.buildDefaultConfig(b)}},a.Configuration.prototype.buildDefaultConfig=function(a){this.reset(),a.forEach(function(a){this.config[a]={boost:1,bool:"OR",expand:!1}},this)},a.Configuration.prototype.buildUserConfig=function(b,g){var d="OR",e=!1,f,c,h;if(this.reset(),"bool"in b&&(d=b.bool||d),"expand"in b&&(e=b.expand||e),"fields"in b)for(f in b.fields)g.indexOf(f)>-1?(c=b.fields[f],h=e,void 0!=c.expand&&(h=c.expand),this.config[f]={boost:c.boost||0===c.boost?c.boost:1,bool:c.bool||d,expand:h}):a.utils.warn("field name in user configuration not found in index instance fields");else this.addAllFields2UserConfig(d,e,g)},a.Configuration.prototype.addAllFields2UserConfig=function(a,b,c){c.forEach(function(c){this.config[c]={boost:1,bool:a,expand:b}},this)},a.Configuration.prototype.get=function(){return this.config},a.Configuration.prototype.reset=function(){this.config={}},lunr.SortedSet=function(){this.length=0,this.elements=[]},lunr.SortedSet.load=function(b){var a=new this;return a.elements=b,a.length=b.length,a},lunr.SortedSet.prototype.add=function(){var a,b;for(a=0;a<arguments.length;a++)b=arguments[a],~this.indexOf(b)||this.elements.splice(this.locationFor(b),0,b);this.length=this.elements.length},lunr.SortedSet.prototype.toArray=function(){return this.elements.slice()},lunr.SortedSet.prototype.map=function(a,b){return this.elements.map(a,b)},lunr.SortedSet.prototype.forEach=function(a,b){return this.elements.forEach(a,b)},lunr.SortedSet.prototype.indexOf=function(d){for(var b=0,f=this.elements.length,e=f-b,a=b+Math.floor(e/2),c=this.elements[a];e>1;){if(c===d)return a;d>c&&(b=a),c>d&&(f=a),e=f-b,a=b+Math.floor(e/2),c=this.elements[a]}return c===d?a:-1},lunr.SortedSet.prototype.locationFor=function(d){for(var b=0,f=this.elements.length,e=f-b,a=b+Math.floor(e/2),c=this.elements[a];e>1;)d>c&&(b=a),c>d&&(f=a),e=f-b,a=b+Math.floor(e/2),c=this.elements[a];return c>d?a:d>c?a+1:void 0},lunr.SortedSet.prototype.intersect=function(e){for(var f=new lunr.SortedSet,a=0,b=0,g=this.length,h=e.length,c=this.elements,d=e.elements;;){if(a>g-1||b>h-1)break;c[a]!==d[b]?c[a]<d[b]?a++:c[a]>d[b]&&b++:(f.add(c[a]),a++,b++)}return f},lunr.SortedSet.prototype.clone=function(){var a=new lunr.SortedSet;return a.elements=this.toArray(),a.length=a.elements.length,a},lunr.SortedSet.prototype.union=function(a){var b,c,d,e,f;this.length>=a.length?(b=this,c=a):(b=a,c=this),d=b.clone();for(e=0,f=c.toArray();e<f.length;e++)d.add(f[e]);return d},lunr.SortedSet.prototype.toJSON=function(){return this.toArray()},function(b,a){"function"==typeof define&&define.amd?define(a):"object"==typeof exports?module.exports=a():b.elasticlunr=a()}(this,function(){return a})}()